<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>cmake笔记 - Sanzo Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Sanzo Blog"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Sanzo Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="本文的源代码：github.com&amp;#x2F;Sanzo00&amp;#x2F;cmake-examples 参考项目：github.com&amp;#x2F;ttroy50&amp;#x2F;cmake-examples 中文学习地址：cmake-examples-Chinese"><meta property="og:type" content="blog"><meta property="og:title" content="cmake笔记"><meta property="og:url" content="https://sanzo.top/Blog/cmake/"><meta property="og:site_name" content="Sanzo Blog"><meta property="og:description" content="本文的源代码：github.com&amp;#x2F;Sanzo00&amp;#x2F;cmake-examples 参考项目：github.com&amp;#x2F;ttroy50&amp;#x2F;cmake-examples 中文学习地址：cmake-examples-Chinese"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://sanzo.top/img/og_image.png"><meta property="article:published_time" content="2021-07-04T14:50:47.000Z"><meta property="article:modified_time" content="2021-07-04T14:50:47.000Z"><meta property="article:author" content="Sanzo"><meta property="article:tag" content="cmake"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://sanzo.top/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://sanzo.top/Blog/cmake/"},"headline":"cmake笔记","image":["https://sanzo.top/img/og_image.png"],"datePublished":"2021-07-04T14:50:47.000Z","dateModified":"2021-07-04T14:50:47.000Z","author":{"@type":"Person","name":"Sanzo"},"publisher":{"@type":"Organization","name":"Sanzo Blog","logo":{"@type":"ImageObject","url":"https://sanzo.top/img/sanzo.png"}},"description":"本文的源代码：github.com&#x2F;Sanzo00&#x2F;cmake-examples 参考项目：github.com&#x2F;ttroy50&#x2F;cmake-examples 中文学习地址：cmake-examples-Chinese"}</script><link rel="canonical" href="https://sanzo.top/Blog/cmake/"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?b59d4dcd7ecbf66eec1a1b7ff331e1a9";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-82SWX0KLXT" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-82SWX0KLXT');</script><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><meta name="follow.it-verification-code" content="ryvLrPRCwHTCNPCEl4LW"><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Sanzo Blog" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/sanzo.png" alt="Sanzo Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">cmake笔记</h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="2021-07-04T14:50:47.000Z" title="2021-07-04T14:50:47.000Z">2021-07-04</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="2021-07-04T14:50:47.000Z" title="2021-07-04T14:50:47.000Z">2021-07-04</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/Blog/">Blog</a></span><span class="level-item"><i class="far fa-clock has-text-grey"></i> 19 minutes read (About 2920 words)</span></div></div><div class="content"><p>本文的源代码：<a target="_blank" rel="noopener" href="https://github.com/Sanzo00/cmake-examples">github.com&#x2F;Sanzo00&#x2F;cmake-examples</a></p>
<p>参考项目：<a target="_blank" rel="noopener" href="https://github.com/ttroy50/cmake-examples/tree/master/">github.com&#x2F;ttroy50&#x2F;cmake-examples</a></p>
<p>中文学习地址：<a target="_blank" rel="noopener" href="https://sfumecjf.github.io/cmake-examples-Chinese/">cmake-examples-Chinese</a></p>
<span id="more"></span>

<h2 id="basic"><a href="#basic" class="headerlink" title="basic"></a>basic</h2><h3 id="hello-cmake"><a href="#hello-cmake" class="headerlink" title="hello cmake"></a>hello cmake</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">└── main.cpp</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMakeLists.txt</span></span><br><span class="line"><span class="comment"># Set the minimum version of CMake that can be used</span></span><br><span class="line"><span class="comment"># To find the cmake version run</span></span><br><span class="line"><span class="comment"># $ cmake --version</span></span><br><span class="line">cmake_minimum_required(VERSION 3.5)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the project name</span></span><br><span class="line">project (hello_cmake)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add an executable</span></span><br><span class="line">add_executable(hello_cmake main.cpp)</span><br><span class="line"><span class="comment"># add_executable($&#123;PROJECT_NAME&#125; main.cpp)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">message(&quot;CMAKE_SOURCE_DIR: $&#123;CMAKE_SOURCE_DIR&#125;&quot;)</span><br><span class="line">message(&quot;CMAKE_CURRENT_SOURCE_DIR: $&#123;CMAKE_CURRENT_SOURCE_DIR&#125;&quot;)</span><br><span class="line">message(&quot;PROJECT_SOURCE_DIR: $&#123;PROJECT_SOURCE_DIR&#125;&quot;)</span><br><span class="line">message(&quot;CMAKE_BINARY_DIR: $&#123;CMAKE_BINARY_DIR&#125;&quot;)</span><br><span class="line">message(&quot;CMAKE_CURRENT_BINARY_DIR: $&#123;CMAKE_CURRENT_BINARY_DIR&#125;&quot;)</span><br><span class="line">message(&quot;PROJECT_BINARY_DIR: $&#123;PROJECT_BINARY_DIR&#125;&quot;)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Info</th>
</tr>
</thead>
<tbody><tr>
<td>CMAKE_SOURCE_DIR</td>
<td>CMakeLists.txt的根目录</td>
</tr>
<tr>
<td>CMAKE_CURRENT_SOURCE_DIR</td>
<td>当前处理CMakeLists.txt的目录</td>
</tr>
<tr>
<td>PROJECT_SOURCE_DIR</td>
<td>项目根目录</td>
</tr>
<tr>
<td>CMAKE_BINARY_DIR</td>
<td>执行cmake的目录（build）</td>
</tr>
<tr>
<td>CMAKE_CURRENT_BINARY_DIR</td>
<td>当前所在的build目录</td>
</tr>
<tr>
<td>PROJECT_BINARY_DIR</td>
<td>项目构建的目录</td>
</tr>
</tbody></table>
<h3 id="hello-headers"><a href="#hello-headers" class="headerlink" title="hello headers"></a>hello headers</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── include</span><br><span class="line">│   └── Hello.h</span><br><span class="line">└── src</span><br><span class="line">    ├── Hello.cpp</span><br><span class="line">    └── main.cpp</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMakeLists.txt</span></span><br><span class="line">cmake_minimum_required(VERSION 3.5)</span><br><span class="line">project (hello_headers)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建SOURCES变量，保存所有的源文件</span></span><br><span class="line"><span class="built_in">set</span>(SOURCES</span><br><span class="line">  src/Hello.cpp</span><br><span class="line">  src/main.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建可执行文件</span></span><br><span class="line">add_executable(hello_headers <span class="variable">$&#123;SOURCES&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定头文件</span></span><br><span class="line">target_include_directories(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  PRIVATE </span><br><span class="line">  <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/include</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<h3 id="static-library"><a href="#static-library" class="headerlink" title="static library"></a>static library</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── include</span><br><span class="line">│   └── static</span><br><span class="line">│       └── Hello.h</span><br><span class="line">└── src</span><br><span class="line">    ├── Hello.cpp</span><br><span class="line">    └── main.cpp</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMakeLists.txt</span></span><br><span class="line">cmake_minimum_required(VERSION 3.5)</span><br><span class="line">project(hello_library)</span><br><span class="line"></span><br><span class="line"><span class="comment">####################################</span></span><br><span class="line"><span class="comment"># Create a library</span></span><br><span class="line"><span class="comment">####################################</span></span><br><span class="line"></span><br><span class="line">add_library(hello_library STATIC</span><br><span class="line">  src/Hello.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">target_include_directories(hello_library</span><br><span class="line">  PUBLIC</span><br><span class="line">    <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/include</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">###################################</span></span><br><span class="line"><span class="comment"># Create an executable</span></span><br><span class="line"><span class="comment">###################################</span></span><br><span class="line"><span class="comment"># Add an executable with the above sources</span></span><br><span class="line">add_executable(hello_binary</span><br><span class="line">  src/main.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># link the new hello_library target with the hello_binary target</span></span><br><span class="line">target_link_libraries( hello_binary</span><br><span class="line">  PRIVATE</span><br><span class="line">    hello_library</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建静态库文件 libhello_library.a</span></span><br><span class="line">add_library(hello_library STATIC</span><br><span class="line">  src/Hello.cpp</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<h3 id="shared-library"><a href="#shared-library" class="headerlink" title="shared library"></a>shared library</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── include</span><br><span class="line">│   └── shared</span><br><span class="line">│       └── Hello.h</span><br><span class="line">└── src</span><br><span class="line">    ├── Hello.cpp</span><br><span class="line">    └── main.cpp</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMakeLists.txt</span></span><br><span class="line">cmake_minimum_required(VERSION 3.5)</span><br><span class="line">project(hello_library)</span><br><span class="line"></span><br><span class="line"><span class="comment">#######################################</span></span><br><span class="line"><span class="comment"># Create a library</span></span><br><span class="line"><span class="comment">#######################################</span></span><br><span class="line"></span><br><span class="line">add_library(hello_library SHARED</span><br><span class="line">  src/Hello.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">add_library(hello::library ALIAS hello_library)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">target_include_directories(hello_library </span><br><span class="line">  PUBLIC</span><br><span class="line">    <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/include</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#######################################</span></span><br><span class="line"><span class="comment"># Create an executable</span></span><br><span class="line"><span class="comment">#######################################</span></span><br><span class="line"></span><br><span class="line">add_executable(hello_binary</span><br><span class="line">  src/main.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">target_link_libraries(hello_binary PRIVATE</span><br><span class="line">  hello::library</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建动态库文件 libhello_library.so</span></span><br><span class="line">add_library(hello_library SHARED</span><br><span class="line">  src/Hello.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对库起别名为hello:library</span></span><br><span class="line">add_library(hello::library ALIAS hello_library)</span><br></pre></td></tr></table></figure>



<h3 id="installing"><a href="#installing" class="headerlink" title="installing"></a>installing</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── cmake-examples.conf</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── include</span><br><span class="line">│   └── installing</span><br><span class="line">│       └── Hello.h</span><br><span class="line">├── README.adoc</span><br><span class="line">└── src</span><br><span class="line">    ├── Hello.cpp</span><br><span class="line">    └── main.cpp</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMakeLists.txt</span></span><br><span class="line">cmake_minimum_required(VERSION 3.5)</span><br><span class="line">project(cmake_install)</span><br><span class="line"></span><br><span class="line"><span class="comment">############################################</span></span><br><span class="line"><span class="comment"># Create a library</span></span><br><span class="line"><span class="comment">############################################</span></span><br><span class="line">add_library(cmake_inst SHARED</span><br><span class="line">  src/Hello.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">target_include_directories(cmake_inst</span><br><span class="line">  PUBLIC</span><br><span class="line">    <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/include</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">############################################</span></span><br><span class="line"><span class="comment"># Create an executable</span></span><br><span class="line"><span class="comment">############################################</span></span><br><span class="line">add_executable(cmake_install_bin</span><br><span class="line">  src/main.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">target_link_libraries(cmake_install_bin </span><br><span class="line">  PRIVATE</span><br><span class="line">    cmake_inst</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">############################################</span></span><br><span class="line"><span class="comment"># Install</span></span><br><span class="line"><span class="comment">############################################</span></span><br><span class="line"><span class="comment"># Binaries</span></span><br><span class="line">install(TARGETS cmake_install_bin DESTINATION bin)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Library</span></span><br><span class="line">install(TARGETS cmake_inst LIBRARY DESTINATION lib)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Header files</span></span><br><span class="line">install(DIRECTORY <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/include/ DESTINATION include)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Config</span></span><br><span class="line">install(FILES cmake.conf DESTINATION etc)</span><br><span class="line"></span><br><span class="line"><span class="comment"># set make install directory</span></span><br><span class="line"><span class="keyword">if</span>(CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT)</span><br><span class="line">  <span class="built_in">set</span>(CMAKE_INSTALL_PREFIX <span class="string">&quot;<span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>/install&quot;</span> CACHE PATH <span class="string">&quot;The path to use for make install&quot;</span> FORCE)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Debug for CMAKE_INSTALL_PREFIX</span></span><br><span class="line">message(<span class="string">&quot;CMAKE_INSTALL_PREFIX: &quot;</span> <span class="variable">$&#123;CMAKE_INSTALL_PREFIX&#125;</span>)</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定make instal的目录为./install</span></span><br><span class="line">cmake .. -D CMAKE_INSTALL_PREFIX=./install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在未指定install目录时，可以在CMakeLists.txt中设置make install的目录</span></span><br><span class="line"><span class="keyword">if</span>(CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT)</span><br><span class="line">  <span class="built_in">set</span>(CMAKE_INSTALL_PREFIX <span class="string">&quot;<span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>/install&quot;</span> CACHE PATH <span class="string">&quot;The path to use for make install&quot;</span> FORCE)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在make install也可以通过DESTDIR=/tmp/stage，安装到$&#123;DESTDIR&#125;/$&#123;CMAKE_INSTALL_PREFIX&#125;</span></span><br><span class="line">make install DESTDIR=/tmp/stage</span><br><span class="line"></span><br><span class="line"><span class="comment"># Uninstall</span></span><br><span class="line"><span class="built_in">sudo</span> xargs <span class="built_in">rm</span> &lt; install_manifest.txt</span><br></pre></td></tr></table></figure>



<h3 id="build-type"><a href="#build-type" class="headerlink" title="build type"></a>build type</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── main.cpp</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMakeLists.txt</span></span><br><span class="line">cmake_minimum_required(VERSION 3.5)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set a default build type if none was specified</span></span><br><span class="line"><span class="comment"># Release, Debug, MinSizeRel, RelWithDebInfo</span></span><br><span class="line"><span class="keyword">if</span>(NOT CMAKE_BUILD_TYPE AND NOT CMAKE_CONFIGURATION_TYPES)</span><br><span class="line">  message(<span class="string">&quot;Setting build type to &#x27;RelWithDebInfo&#x27; as none was specified.&quot;</span>)</span><br><span class="line">  <span class="built_in">set</span>(CMAKE_BUILD_TYPE RelWithDebInfo CACHE STRING <span class="string">&quot;Choose the type of build.&quot;</span> FORCE)</span><br><span class="line">  <span class="comment"># Set the possible values of build type for cmake-gui</span></span><br><span class="line">  set_property(CACHE CMAKE_BUILD_TYPE PROPERTY STRINGS <span class="string">&quot;Debug&quot;</span> <span class="string">&quot;Release&quot;</span></span><br><span class="line">    <span class="string">&quot;MinSizeRel&quot;</span> <span class="string">&quot;RelWithDebInfo&quot;</span>)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line">project(build_type)</span><br><span class="line"></span><br><span class="line">add_executable(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  main.cpp</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<p>Cmake提供四种构建类型：</p>
<ol>
<li>Release，<code>-O3 -DNDEBUG</code></li>
<li>Debug，<code>-g</code></li>
<li>MinSizeRel，<code>-Os -DNDEBUG</code></li>
<li>RelWithDebInfo，<code>-O2 -g -DNDEBUG</code></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用户在cmake时指定编译类型</span></span><br><span class="line">cmake .. -DCMAKE_BUILD_TYPE=Release</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置默认的构建类型</span></span><br><span class="line"><span class="comment"># Release, Debug, MinSizeRel, RelWithDebInfo</span></span><br><span class="line"><span class="keyword">if</span>(NOT CMAKE_BUILD_TYPE AND NOT CMAKE_CONFIGURATION_TYPES)</span><br><span class="line">  message(<span class="string">&quot;Setting build type to &#x27;RelWithDebInfo&#x27; as none was specified.&quot;</span>)</span><br><span class="line">  <span class="built_in">set</span>(CMAKE_BUILD_TYPE RelWithDebInfo CACHE STRING <span class="string">&quot;Choose the type of build.&quot;</span> FORCE)</span><br><span class="line">  <span class="comment"># Set the possible values of build type for cmake-gui</span></span><br><span class="line">  set_property(CACHE CMAKE_BUILD_TYPE PROPERTY STRINGS <span class="string">&quot;Debug&quot;</span> <span class="string">&quot;Release&quot;</span></span><br><span class="line">    <span class="string">&quot;MinSizeRel&quot;</span> <span class="string">&quot;RelWithDebInfo&quot;</span>)</span><br><span class="line">endif()</span><br></pre></td></tr></table></figure>



<h3 id="compile-flags"><a href="#compile-flags" class="headerlink" title="compile flags"></a>compile flags</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── main.cpp</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>** argv)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  std::cout &lt;&lt; <span class="string">&quot;Hello Compile Flags!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// only print if compile flag set</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> EX2</span></span><br><span class="line">  std::cout &lt;&lt; <span class="string">&quot;Hello Compile Flag EX2!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> EX3</span></span><br><span class="line">  std::cout &lt;&lt; <span class="string">&quot;Hello Compile Flag EX3!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMakeLists.txt</span></span><br><span class="line">cmake_minimum_required(VERSION 3.5)</span><br><span class="line">project(compile_flags)</span><br><span class="line"></span><br><span class="line">add_executable(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  main.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set a default C++ compile flag</span></span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;<span class="variable">$&#123;CMAKE_CXX_FLAGS&#125;</span> -DEX2&quot;</span> CACHE STRING <span class="string">&quot;Set C++ Compile Flags&quot;</span> FORCE)</span><br><span class="line"></span><br><span class="line">target_compile_definitions(<span class="variable">$&#123;PROJECT_NAME&#125;</span> PRIVATE EX3)</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为特定的可执行文件或库设置compile flags</span></span><br><span class="line">target_compile_definitions(<span class="variable">$&#123;PROJECT_NAME&#125;</span> PRIVATE EX3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置全局的compile flags</span></span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;<span class="variable">$&#123;CMAKE_CXX_FLAGS&#125;</span> -DEX2&quot;</span> CACHE STRING <span class="string">&quot;Set C++ Compile Flags&quot;</span> FORCE)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过cmake设置</span></span><br><span class="line">cmake .. -DCMAKE_CXX_FLAGS=<span class="string">&quot;-DEX3&quot;</span></span><br></pre></td></tr></table></figure>



<h3 id="third-party-library"><a href="#third-party-library" class="headerlink" title="third party library"></a>third party library</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装依赖</span></span><br><span class="line"><span class="built_in">sudo</span> apt install libboost-system-dev libboost-filesystem-dev</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── main.cpp</span><br></pre></td></tr></table></figure>



<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;boost/shared_ptr.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;boost/filesystem.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>** argv)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  std::cout &lt;&lt; <span class="string">&quot;Hello Third Party Include!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// use a shared ptr</span></span><br><span class="line">  <span class="function">boost::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">isp</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">4</span>))</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// trivial use of boost filesystem</span></span><br><span class="line">  boost::filesystem::path path = <span class="string">&quot;/usr/share/cmake/modules&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (path.<span class="built_in">is_relative</span>()) &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Path is relative&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Path is not relative&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMakeLists.txt</span></span><br><span class="line">cmake_minimum_required(VERSION 3.5)</span><br><span class="line">project(third_party_library)</span><br><span class="line"></span><br><span class="line"><span class="comment"># find a boost install with the libraries filesystem and system</span></span><br><span class="line">find_package(Boost 1.46.1 REQUIRED COMPONENTS filesystem system)</span><br><span class="line"></span><br><span class="line"><span class="comment"># check if boost was found</span></span><br><span class="line"><span class="keyword">if</span>(Boost_FOUND)</span><br><span class="line">  message(<span class="string">&quot;boost found&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">  message(FATAL_ERROR <span class="string">&quot;Cannot find boost&quot;</span>)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">add_executable(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  main.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># link against the boost libraries</span></span><br><span class="line">target_link_libraries(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  PRIVATE</span><br><span class="line">    Boost::filesystem</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<blockquote>
<p>查找库</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># find package</span></span><br><span class="line">find_package(Boost 1.46.1 REQUIRED COMPONENTS filesystem system)</span><br></pre></td></tr></table></figure>

<p>Boost为库的名称</p>
<p>1.46.1是最低的版本号</p>
<p>REQUIRED表示这是必需的库，如果找不到报错。</p>
<p>COMPONENTS是要查找的库列表</p>
<blockquote>
<p>检查库是否存在</p>
</blockquote>
<p>大多数被包含的库都会设置变量<code>xxx_FOUND</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># check if boost was found</span></span><br><span class="line"><span class="keyword">if</span>(Boost_FOUND)</span><br><span class="line">  message(<span class="string">&quot;boost found&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">  message(FATAL_ERROR <span class="string">&quot;Cannot find boost&quot;</span>)</span><br><span class="line">endif()</span><br></pre></td></tr></table></figure>

<p>如果库存在，一般会设置如下参数用来定位库：</p>
<ul>
<li><code>xxx_INCLUDE_DIRS</code> - 头文件位置</li>
<li><code>xxx_LIBRARY</code> - 库位置</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Include the boost headers</span></span><br><span class="line">target_include_directories( third_party_include</span><br><span class="line">    PRIVATE <span class="variable">$&#123;Boost_INCLUDE_DIRS&#125;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># link against the boost libraries</span></span><br><span class="line">target_link_libraries( third_party_include</span><br><span class="line">    PRIVATE</span><br><span class="line">    <span class="variable">$&#123;Boost_SYSTEM_LIBRARY&#125;</span></span><br><span class="line">    <span class="variable">$&#123;Boost_FILESYSTEM_LIBRARY&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<blockquote>
<p>别名</p>
</blockquote>
<p>大多数modern CMake库包含别名，例如对于boost来说可以使用：</p>
<ul>
<li><code>Boost::boost</code> for header only libraries</li>
<li><code>Boost::system</code> for the boost system library.</li>
<li><code>Boost::filesystem</code> for filesystem library.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">target_link_libraries( third_party_include</span><br><span class="line">	PRIVATE</span><br><span class="line">		Boost::filesystem</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="compiling-with-clang"><a href="#compiling-with-clang" class="headerlink" title="compiling with clang"></a>compiling with clang</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install clang</span></span><br><span class="line"><span class="built_in">sudo</span> apt install clang</span><br></pre></td></tr></table></figure>





<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── main.cpp</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMakeLists.txt</span></span><br><span class="line">cmake_minimum_required(VERSION 3.5)</span><br><span class="line">project(hello_cmake)</span><br><span class="line">add_executable(<span class="variable">$&#123;PROJECT_NAME&#125;</span> main.cpp)</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line"><span class="comment"># Delete old build.clang directory</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line">ROOT_DIR=`<span class="built_in">pwd</span>`</span><br><span class="line"><span class="comment">#dir=&quot;I-compiling-with-clang&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">&quot;<span class="variable">$ROOT_DIR</span>/build.clang&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;deleting <span class="variable">$ROOT_DIR</span>/build.clang&quot;</span></span><br><span class="line">  <span class="built_in">rm</span> -rf <span class="variable">$ROOT_DIR</span>/build.clang</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line"><span class="comment"># determine the clang binary before calling cmake</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line">clang_bin=`<span class="built_in">which</span> clang`</span><br><span class="line">clang_xx_bin=`<span class="built_in">which</span> clang++`</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$clang_bin</span> ]; <span class="keyword">then</span></span><br><span class="line">		<span class="comment"># 获取版本号</span></span><br><span class="line">    clang_ver=`dpkg --get-selections | grep clang | grep -v -m1 libclang | <span class="built_in">cut</span> -f1 | <span class="built_in">cut</span> -d <span class="string">&#x27;-&#x27;</span> -f2`</span><br><span class="line">    clang_bin=<span class="string">&quot;clang-<span class="variable">$clang_ver</span>&quot;</span></span><br><span class="line">    clang_xx_bin=<span class="string">&quot;clang++-<span class="variable">$clang_ver</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Will use clang [<span class="variable">$clang_bin</span>] and clang++ [<span class="variable">$clang_xx_bin</span>]&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p build.clang &amp;&amp; <span class="built_in">cd</span> build.clang &amp;&amp; \</span><br><span class="line">  cmake .. -DCMAKE_C_COMPILER=<span class="variable">$clang_bin</span> -DCMAKE_CXX_COMPILER=<span class="variable">$clang_xx_bin</span> &amp;&amp; make</span><br></pre></td></tr></table></figure>

<p>CMake的编译器选项：</p>
<ul>
<li>CMAKE_C_COMPILER - The program used to compile c code.</li>
<li>CMAKE_CXX_COMPILER - The program used to compile c++ code.</li>
<li>CMAKE_LINKER - The program used to link your binary.</li>
</ul>
<h3 id="building-with-ninja"><a href="#building-with-ninja" class="headerlink" title="building with ninja"></a>building with ninja</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── main.cpp</span><br></pre></td></tr></table></figure>

<p>CMake包含多种生成器：<code>cmake --help</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Generators</span><br><span class="line"></span><br><span class="line">The following generators are available on this platform (* marks default):</span><br><span class="line">* Unix Makefiles               = Generates standard UNIX makefiles.</span><br><span class="line">  Green Hills MULTI            = Generates Green Hills MULTI files</span><br><span class="line">                                 (experimental, work-in-progress).</span><br><span class="line">  Ninja                        = Generates build.ninja files.</span><br><span class="line">  Watcom WMake                 = Generates Watcom WMake makefiles.</span><br><span class="line">  CodeBlocks - Ninja           = Generates CodeBlocks project files.</span><br><span class="line">  CodeBlocks - Unix Makefiles  = Generates CodeBlocks project files.</span><br><span class="line">  CodeLite - Ninja             = Generates CodeLite project files.</span><br><span class="line">  CodeLite - Unix Makefiles    = Generates CodeLite project files.</span><br><span class="line">  Sublime Text 2 - Ninja       = Generates Sublime Text 2 project files.</span><br><span class="line">  Sublime Text 2 - Unix Makefiles</span><br><span class="line">                               = Generates Sublime Text 2 project files.</span><br><span class="line">  Kate - Ninja                 = Generates Kate project files.</span><br><span class="line">  Kate - Unix Makefiles        = Generates Kate project files.</span><br><span class="line">  Eclipse CDT4 - Ninja         = Generates Eclipse CDT 4.0 project files.</span><br><span class="line">  Eclipse CDT4 - Unix Makefiles= Generates Eclipse CDT 4.0 project files.</span><br></pre></td></tr></table></figure>

<p>接下来使用Ninja进行构建：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install ninja-build</span></span><br><span class="line"><span class="built_in">sudo</span> apt install ninja-build</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> ninja.build &amp;&amp; <span class="built_in">cd</span> ninja.build</span><br><span class="line"></span><br><span class="line">cmake .. -G Ninja</span><br><span class="line"></span><br><span class="line">ninja -v</span><br></pre></td></tr></table></figure>

<h3 id="cpp-standard"><a href="#cpp-standard" class="headerlink" title="cpp standard"></a>cpp standard</h3><p>设置c++的编译标准。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── main.cpp</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>** argv)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">auto</span> message = <span class="string">&quot;Hello C++11&quot;</span>;</span><br><span class="line"></span><br><span class="line">  std::cout &lt;&lt; message &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMakeLists.txt</span></span><br><span class="line">cmake_minimum_required(VERSION 3.5)</span><br><span class="line">project(hello_cpp11)</span><br><span class="line"></span><br><span class="line"><span class="comment"># try conditional compilation</span></span><br><span class="line">include(CheckCXXCompilerFlag) <span class="comment"># CHECK_CXX_COMPILER_FLAG的头文件</span></span><br><span class="line">CHECK_CXX_COMPILER_FLAG(<span class="string">&quot;-std=c++11&quot;</span> COMPILER_SUPPORTS_CXX11) <span class="comment"># 尝试使用flag进行编译，并把结果保存到变量中</span></span><br><span class="line">CHECK_CXX_COMPILER_FLAG(<span class="string">&quot;-std=c++0x&quot;</span> COMPILER_SUPPORTS_CXX0X)</span><br><span class="line"></span><br><span class="line"><span class="comment"># check results and add flag</span></span><br><span class="line"><span class="keyword">if</span> (COMPILER_SUPPORTS_CXX11)</span><br><span class="line">  <span class="built_in">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;<span class="variable">$&#123;CMAKE_CXX_FLAGS&#125;</span> -std=c++11&quot;</span>)</span><br><span class="line">elseif(COMPILER_SUPPORTS_CXX0X)</span><br><span class="line">  <span class="built_in">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;<span class="variable">$&#123;CMAKE_CXX_FLAGS&#125;</span> -std=c++0x&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">  message(STATUS <span class="string">&quot;The compiler <span class="variable">$&#123;CMAKE_CXX_COMPILER&#125;</span> has no C++11 support. Please use a different C++ compiler.&quot;</span>)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line">add_executable(<span class="variable">$&#123;PROJECT_NAME&#125;</span> main.cpp)</span><br></pre></td></tr></table></figure>

<p>另外还有两种设置c++ standard的方法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#######################################################################</span></span><br><span class="line"><span class="comment"># Using the CMAKE_CXX_STANDARD variable introduced in CMake v3.1.</span></span><br><span class="line"><span class="comment">#######################################################################</span></span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_STANDARD 11)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#######################################################################</span></span><br><span class="line"><span class="comment"># Using the target_compile_features function introduced in CMake v3.1.</span></span><br><span class="line"><span class="comment">#######################################################################</span></span><br><span class="line"><span class="comment"># set the C++ standard to the appropriate standard for using auto</span></span><br><span class="line">target_compile_features(hello_cpp11 PUBLIC cxx_auto_type)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print the list of known compile features for this version of CMake</span></span><br><span class="line">message(<span class="string">&quot;List of compile features: <span class="variable">$&#123;CMAKE_CXX_COMPILE_FEATURES&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>







<h2 id="sub-projects"><a href="#sub-projects" class="headerlink" title="sub projects"></a>sub projects</h2><ul>
<li>sublibrary1 - A static library</li>
<li>sublibrary2 - A header only library</li>
<li>subbinary - An executable</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── subbinary</span><br><span class="line">│   ├── CMakeLists.txt</span><br><span class="line">│   └── main.cpp</span><br><span class="line">├── sublibrary1</span><br><span class="line">│   ├── CMakeLists.txt</span><br><span class="line">│   ├── include</span><br><span class="line">│   │   └── sublib1</span><br><span class="line">│   │       └── sublib1.h</span><br><span class="line">│   └── src</span><br><span class="line">│       └── sublib1.cpp</span><br><span class="line">└── sublibrary2</span><br><span class="line">    ├── CMakeLists.txt</span><br><span class="line">    └── include</span><br><span class="line">        └── sublib2</span><br><span class="line">            └── sublib2.h</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMakeLists.txt</span></span><br><span class="line">cmake_minimum_required(VERSION 3.5)</span><br><span class="line">project(sub_projects)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add sub directories</span></span><br><span class="line">add_subdirectory(subbinary)</span><br><span class="line">add_subdirectory(sublibrary1)</span><br><span class="line">add_subdirectory(sublibrary2)</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sublibrary1/CMakeLists.txt</span></span><br><span class="line"><span class="comment"># set project name</span></span><br><span class="line">project(sublibrary1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add a library with the above sources</span></span><br><span class="line">add_library(<span class="variable">$&#123;PROJECT_NAME&#125;</span> src/sublib1.cpp)</span><br><span class="line">add_library(sub::lib1 ALIAS <span class="variable">$&#123;PROJECT_NAME&#125;</span>)</span><br><span class="line"></span><br><span class="line">target_include_directories(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  PUBLIC <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/include</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sublibrary2/CMakeLists.txt</span></span><br><span class="line"><span class="comment"># set the project name</span></span><br><span class="line">project(sublibrary2)</span><br><span class="line"></span><br><span class="line">add_library(<span class="variable">$&#123;PROJECT_NAME&#125;</span> INTERFACE)</span><br><span class="line">add_library(sub::lib2 ALIAS <span class="variable">$&#123;PROJECT_NAME&#125;</span>)</span><br><span class="line"></span><br><span class="line">target_include_directories(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  INTERFACE</span><br><span class="line">    <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/include</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># subbinary/CMakeLists.txt</span></span><br><span class="line"><span class="comment"># set project name</span></span><br><span class="line">project(subbinary)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create the executable</span></span><br><span class="line">add_executable(<span class="variable">$&#123;PROJECT_NAME&#125;</span> main.cpp)</span><br><span class="line"></span><br><span class="line"><span class="comment"># link the static library from sublibrary1 using it&#x27;s alias sub::lib1</span></span><br><span class="line"><span class="comment"># link the header only library from sublibrary2 using it&#x27;s alias sub::lib2</span></span><br><span class="line"><span class="comment"># this will cause the include directories for that target to be added to this project</span></span><br><span class="line">target_link_libraries(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  sub::lib1</span><br><span class="line">  sub::lib2</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<h2 id="code-generation"><a href="#code-generation" class="headerlink" title="code generation"></a>code generation</h2><h3 id="configure-files"><a href="#configure-files" class="headerlink" title="configure files"></a>configure files</h3><ul>
<li>CMakeLists.txt - Contains the CMake commands you wish to run</li>
<li>main.cpp - The source file with main</li>
<li>path.h.in - File to contain a path to the build directory</li>
<li>ver.h.in - File to contain the version of the project</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── main.cpp</span><br><span class="line">├── path.h.in</span><br><span class="line">├── ver.h.in</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ver.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;path.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello Version &quot;</span> &lt;&lt; ver &lt;&lt; <span class="string">&quot;!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Path is &quot;</span> &lt;&lt; path &lt;&lt; std::endl;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过CMake的<code>configure_file()</code>自动生成代码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMakeLists.txt</span></span><br><span class="line">cmake_minimum_required(VERSION 3.5)</span><br><span class="line">project(cf_example)</span><br><span class="line"></span><br><span class="line"><span class="comment"># set a project version</span></span><br><span class="line"><span class="built_in">set</span>(cf_example_VERSION_MAJOR 0)</span><br><span class="line"><span class="built_in">set</span>(cf_example_VERSION_MINOR 2)</span><br><span class="line"><span class="built_in">set</span>(cf_example_VERSION_PATCH 1)</span><br><span class="line"><span class="built_in">set</span>(cf_example_VERSION <span class="string">&quot;<span class="variable">$&#123;cf_example_VERSION_MAJOR&#125;</span>.<span class="variable">$&#123;cf_example_VERSION_MINOR&#125;</span>.<span class="variable">$&#123;cf_example_VERSION_PATCH&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># call configure files on ver.h to set the version</span></span><br><span class="line"><span class="comment"># uses the standard $&#123;VARIABLE&#125; syntax in the file</span></span><br><span class="line">configure_file(ver.h.in <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/ver.h)</span><br><span class="line"></span><br><span class="line"><span class="comment"># this file can only use the @VARIABLE syntax in the file</span></span><br><span class="line">configure_file(path.h.in <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/path.h @ONLY)</span><br><span class="line"></span><br><span class="line">add_executable(<span class="variable">$&#123;PROJECT_NAME&#125;</span> main.cpp)</span><br><span class="line"></span><br><span class="line">target_include_directories(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  PRIVATE</span><br><span class="line">    <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<h3 id="protobuf"><a href="#protobuf" class="headerlink" title="protobuf"></a>protobuf</h3><p>protobuf是google开源的对字符串进行序列化的库，将要序列化的数据定义写在原始文件<code>.proto</code>配置文件中，protobuf将数据序列化为二进制格式，节省内存，加快了数据的传输，但是降低了可读性。</p>
<ul>
<li>AddressBook.proto - proto file from main protocol buffer <a target="_blank" rel="noopener" href="https://developers.google.com/protocol-buffers/docs/cpptutorial">example</a></li>
<li>CMakeLists.txt - Contains the CMake commands you wish to run</li>
<li>main.cpp - The source file from the protobuf example.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── AddressBook.proto</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── main.cpp</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMakeLists.txt</span></span><br><span class="line"><span class="comment"># set cmake minimum version</span></span><br><span class="line">cmake_minimum_required(VERSION 3.5)</span><br><span class="line"></span><br><span class="line"><span class="comment"># set the project name</span></span><br><span class="line">project(protobuf_exmaple)</span><br><span class="line"></span><br><span class="line"><span class="comment"># find the protobuf compiler and libraries</span></span><br><span class="line">find_package(Protobuf REQUIRED)</span><br><span class="line"></span><br><span class="line"><span class="comment"># check if protobuf was found</span></span><br><span class="line"><span class="keyword">if</span> (PROTOBUF_FOUND)</span><br><span class="line">  message(<span class="string">&quot;protobuf found&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">  message(FATAL_ERROR <span class="string">&quot;Cannot find protobuf&quot;</span>)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line"><span class="comment"># generate the .h and .cxx files</span></span><br><span class="line">PROTOBUF_GENERATE_CPP(PROTO_SRCS PROTO_HDRS AddressBook.proto)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print path </span></span><br><span class="line">message(<span class="string">&quot;PROTO_SRCS = <span class="variable">$&#123;PROTO_SRCS&#125;</span>&quot;</span>)</span><br><span class="line">message(<span class="string">&quot;PROTO_HDRS = <span class="variable">$&#123;PROTO_HDRS&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add an executable</span></span><br><span class="line">add_executable(<span class="variable">$&#123;PROJECT_NAME&#125;</span> </span><br><span class="line">  main.cpp</span><br><span class="line">  <span class="variable">$&#123;PROTO_SRCS&#125;</span></span><br><span class="line">  <span class="comment"># $&#123;PROTO_HDRS&#125;  </span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">target_include_directories(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  PUBLIC</span><br><span class="line">    <span class="variable">$&#123;PROTOBUF_INCLUDE_DIRS&#125;</span></span><br><span class="line">    <span class="variable">$&#123;CMAKE_CURRENT_BINARY_DIR&#125;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">target_link_libraries(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  PUBLIC <span class="variable">$&#123;PROTOBUF_LIBRARIES&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>





<!-- Q.E.D. --></div><div class="article-licensing box"><div class="licensing-title"><p>cmake笔记</p><p><a href="https://sanzo.top/Blog/cmake/">https://sanzo.top/Blog/cmake/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Sanzo</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2021-07-04</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2021-07-04</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/cmake/">cmake </a></div></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/img/alipay.jpg" alt="Alipay"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/img/wechat.jpg" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/Blog/raspi-car/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">树莓派小车</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/Blog/python-env/"><span class="level-item">python环境配置</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div class="content twikoo" id="twikoo"></div><script src="https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js"></script><script>twikoo.init({
      envId: 'https://sanzo-blog.netlify.app/.netlify/functions/twikoo'
    });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/sanzo.png" alt="Hao Yuan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Hao Yuan</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Shenyang, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">16</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Category</p><a href="/categories"><p class="title">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">26</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Sanzo00" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Sanzo00"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:arrangeman@163.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#basic"><span class="level-left"><span class="level-item">1</span><span class="level-item">basic</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#hello-cmake"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">hello cmake</span></span></a></li><li><a class="level is-mobile" href="#hello-headers"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">hello headers</span></span></a></li><li><a class="level is-mobile" href="#static-library"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">static library</span></span></a></li><li><a class="level is-mobile" href="#shared-library"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">shared library</span></span></a></li><li><a class="level is-mobile" href="#installing"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">installing</span></span></a></li><li><a class="level is-mobile" href="#build-type"><span class="level-left"><span class="level-item">1.6</span><span class="level-item">build type</span></span></a></li><li><a class="level is-mobile" href="#compile-flags"><span class="level-left"><span class="level-item">1.7</span><span class="level-item">compile flags</span></span></a></li><li><a class="level is-mobile" href="#third-party-library"><span class="level-left"><span class="level-item">1.8</span><span class="level-item">third party library</span></span></a></li><li><a class="level is-mobile" href="#compiling-with-clang"><span class="level-left"><span class="level-item">1.9</span><span class="level-item">compiling with clang</span></span></a></li><li><a class="level is-mobile" href="#building-with-ninja"><span class="level-left"><span class="level-item">1.10</span><span class="level-item">building with ninja</span></span></a></li><li><a class="level is-mobile" href="#cpp-standard"><span class="level-left"><span class="level-item">1.11</span><span class="level-item">cpp standard</span></span></a></li></ul></li><li><a class="level is-mobile" href="#sub-projects"><span class="level-left"><span class="level-item">2</span><span class="level-item">sub projects</span></span></a></li><li><a class="level is-mobile" href="#code-generation"><span class="level-left"><span class="level-item">3</span><span class="level-item">code generation</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#configure-files"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">configure files</span></span></a></li><li><a class="level is-mobile" href="#protobuf"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">protobuf</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Blog/"><span class="level-start"><span class="level-item">Blog</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="https://api.follow.it/subscription-form/VkdEYjJIYUJXc3NWWEUrcTRQVzhYN2hxYVpHZDBOWlNTZDhBWW1TbmtmUkVKNDlobzZwMFVuY2ZKYXliT1BJTEtIV0NNaVY0bnVPTXJxVURJOEMyUWNTVndTc3ZEQXAwUndERG43bjB6RnVCOUxtVGVOTkVtWUlVZS9yVlNhZW18QTVaT1plUWxrNkt6b2tuYlFWdmFLN2pUOHBZeHB6VytMU0JEUFJwTFlhdz0=/8" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-10-03T02:40:48.000Z">2024-10-03</time></p><p class="title"><a href="/Blog/easyconnect/">使用Docker封印EasyConnect</a></p><p class="categories"><a href="/categories/Blog/">Blog</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-19T08:38:06.000Z">2024-09-19</time></p><p class="title"><a href="/Blog/llm_inference/">LLM推理服务论文</a></p><p class="categories"><a href="/categories/Blog/">Blog</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-07-14T07:25:56.000Z">2024-07-14</time></p><p class="title"><a href="/Blog/yabai/">yabai: macOS的窗口管理</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-02T11:23:09.000Z">2024-04-02</time></p><p class="title"><a href="/Blog/continue/">VSCode插件: Continue</a></p><p class="categories"><a href="/categories/Blog/">Blog</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-02-28T00:06:50.000Z">2024-02-28</time></p><p class="title"><a href="/Blog/rag/">RAG介绍</a></p><p class="categories"><a href="/categories/Blog/">Blog</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/10/"><span class="level-start"><span class="level-item">October 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/09/"><span class="level-start"><span class="level-item">September 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/07/"><span class="level-start"><span class="level-item">July 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">April 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">February 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">May 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">March 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">June 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/EasyConnect/"><span class="tag">EasyConnect</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LLM-Inference/"><span class="tag">LLM, Inference</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ML/"><span class="tag">ML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RAG/"><span class="tag">RAG</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RaspberryPi/"><span class="tag">RaspberryPi</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/car/"><span class="tag">car</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cmake/"><span class="tag">cmake</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/command/"><span class="tag">command</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/continue/"><span class="tag">continue</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linear-algebra/"><span class="tag">linear algebra</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/math/"><span class="tag">math</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/miniconda/"><span class="tag">miniconda</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ollama/"><span class="tag">ollama</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pi/"><span class="tag">pi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pytorch/"><span class="tag">pytorch</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/samba/"><span class="tag">samba</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/school/"><span class="tag">school</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/setup/"><span class="tag">setup</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ubuntu/"><span class="tag">ubuntu</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/v2ray/"><span class="tag">v2ray</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/venv/"><span class="tag">venv</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vpn/"><span class="tag">vpn</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/zsh/"><span class="tag">zsh</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/sanzo.png" alt="Sanzo Blog" height="28"></a><p class="is-size-7"><span>&copy; 2025 Sanzo</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2024</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/mhchem.min.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js"></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>